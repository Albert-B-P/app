# Travis CI build configuration for iSC Inc. system
# <https://travis-ci.org/iSCInc/app>
#
# The iSC Inc. uses a self-hosted git system to run a wiki.
# Travis CI is only a usage for iSC Inc. on GitHub.
#
language: php
php:
  - "5.5"
  - "5.4"
  - "5.3"

php:
  - hhvm-nightly

language: node_js
node_js:
  - "0.11"
  - "0.10"
  - "0.8"
  - "0.6"

language: java

language: perl
perl:
  - "5.16"
  - "5.14"
  - "5.12"

language: ruby
rvm:
  - "1.8.7"
  - "1.9.2"
  - "1.9.3"
  - jruby-18mode # JRuby in 1.8 mode
  - jruby-19mode # JRuby in 1.9 mode
  - rbx
# uncomment this line if your project needs to run something other than `rake`:
# script: bundle exec rspec spec


services:
  - mysql

branches:
  # Test changes in master and in iSC Inc.'s production branches.
  only:
    - master
    - /^isc\/.*$/

before_install:
  - sudo apt-get install -qq djvulibre-bin tidy
  - composer self-update --quiet --no-interaction

before_script:
  - composer install --prefer-source --quiet --no-interaction
  - >
      php maintenance/install.php traviswiki admin
      --pass travis
      --dbname traviswiki
      --dbuser travis
      --dbpass ""
      --scriptpath "/w"

script:
  - php tests/phpunit/phpunit.php

notifications:
  email:
    - isc.suriyaa@gmail.com
